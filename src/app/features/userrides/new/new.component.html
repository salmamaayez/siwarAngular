<div class="publish-container">
  <div class="container py-5">
    
    <div class="form-wrapper">
      
      <!-- Header -->
      <div class="form-header">
        <h1 class="form-title">ğŸš— Publier un trajet</h1>
        <p class="form-subtitle">Partagez votre route et rÃ©duisez vos frais</p>
        
        <!-- Progress Steps -->
        <div class="steps-indicator">
          <div class="step" [class.active]="currentStep >= 1" [class.completed]="currentStep > 1">
            <div class="step-icon">ğŸ“</div>
            <span class="step-label">ItinÃ©raire</span>
          </div>
          <div class="step-line" [class.filled]="currentStep > 1"></div>
          <div class="step" [class.active]="currentStep >= 2" [class.completed]="currentStep > 2">
            <div class="step-icon">ğŸ“…</div>
            <span class="step-label">DÃ©tails</span>
          </div>
          <div class="step-line" [class.filled]="currentStep > 2"></div>
          <div class="step" [class.active]="currentStep >= 3">
            <div class="step-icon">âœ…</div>
            <span class="step-label">Confirmation</span>
          </div>
        </div>
      </div>

      <form [formGroup]="rideForm" (ngSubmit)="onSubmit()" class="ride-form">
        
        <!-- Step 1: Route -->
        <div class="form-step" *ngIf="currentStep === 1">
          <h3 class="step-title">D'oÃ¹ partez-vous ?</h3>
          
          <div class="input-group-animated">
            <span class="input-icon">ğŸ“</span>
            <input type="text" formControlName="departure" placeholder="Ville de dÃ©part" class="modern-input">
            <label>DÃ©part</label>
          </div>

          <div class="connector-line">
            <span class="arrow">â¬‡</span>
          </div>

          <div class="input-group-animated">
            <span class="input-icon">ğŸ</span>
            <input type="text" formControlName="arrival" placeholder="Ville d'arrivÃ©e" class="modern-input">
            <label>ArrivÃ©e</label>
          </div>

          <div class="step-actions">
            <!-- Placeholder for back button spacing -->
             <div></div> 
            <button type="button" class="btn-next" (click)="nextStep()">Suivant âœ</button>
          </div>
        </div>

        <!-- Step 2: Details -->
        <div class="form-step" *ngIf="currentStep === 2">
          <h3 class="step-title">Quand partez-vous ?</h3>
          
          <div class="row">
            <div class="col-md-6">
              <div class="input-group-animated">
                <span class="input-icon">ğŸ“…</span>
                <input type="date" formControlName="date" class="modern-input">
                <label>Date</label>
              </div>
            </div>
            <div class="col-md-6">
              <div class="input-group-animated">
                <span class="input-icon">â°</span>
                <input type="time" formControlName="time" class="modern-input">
                <label>Heure</label>
              </div>
            </div>
          </div>

          <div class="separator"></div>
          <h3 class="step-title mt-4">ModalitÃ©s</h3>

          <div class="row">
            <div class="col-md-6">
              <label class="counter-label">Passagers</label>
              <div class="counter-input">
                <input type="number" formControlName="passengers" min="1" max="8">
              </div>
            </div>
            <div class="col-md-6">
              <label class="counter-label">Prix par place (â‚¬)</label>
              <div class="price-input-wrapper">
                <input type="number" formControlName="price" class="modern-input price-input" min="0">
                <span class="currency">â‚¬</span>
              </div>
            </div>
          </div>

          <div class="options-grid mt-4">
            <label class="checkbox-card">
              <input type="checkbox" formControlName="allowSmoking">
              <span class="card-content">
                <span class="card-icon">ğŸš¬</span>
                <span class="card-text">Fumeur acceptÃ©</span>
              </span>
            </label>
            
            <label class="checkbox-card">
              <input type="checkbox" formControlName="allowPets">
              <span class="card-content">
                <span class="card-icon">ğŸ¾</span>
                <span class="card-text">Animaux acceptÃ©s</span>
              </span>
            </label>

            <label class="checkbox-card">
              <input type="checkbox" formControlName="instantBooking">
              <span class="card-content">
                <span class="card-icon">âš¡</span>
                <span class="card-text">RÃ©servation auto</span>
              </span>
            </label>
          </div>

          <div class="step-actions">
            <button type="button" class="btn-prev" (click)="prevStep()">â¬… Retour</button>
            <button type="button" class="btn-next" (click)="nextStep()">Suivant âœ</button>
          </div>
        </div>

        <!-- Step 3: Confirmation / Preview -->
        <div class="form-step" *ngIf="currentStep === 3">
          <h3 class="step-title text-center">RÃ©capitulatif</h3>
          
          <div class="preview-card">
            <div class="preview-route">
              <div class="city">{{ rideForm.get('departure')?.value || 'DÃ©part' }}</div>
              <div class="route-visual">
                <div class="line"></div>
                <div class="icon">ğŸš—</div>
              </div>
              <div class="city">{{ rideForm.get('arrival')?.value || 'ArrivÃ©e' }}</div>
            </div>
            
            <div class="preview-details">
              <div class="detail">
                <span class="icon">ğŸ“…</span>
                <span>{{ rideForm.get('date')?.value }}</span>
              </div>
              <div class="detail">
                <span class="icon">â°</span>
                <span>{{ rideForm.get('time')?.value }}</span>
              </div>
              <div class="detail">
                <span class="icon">ğŸ’¶</span>
                <span class="price-highlight">{{ rideForm.get('price')?.value }}â‚¬</span>
              </div>
            </div>
          </div>

          <div class="input-group-animated mt-4">
            <span class="input-icon">ğŸ“</span>
            <textarea formControlName="description" placeholder="Informations complÃ©mentaires pour les passagers..." class="modern-textarea" rows="3"></textarea>
            <label>Description (optionnel)</label>
          </div>

          <div class="step-actions">
            <button type="button" class="btn-prev" (click)="prevStep()">â¬… Retour</button>
            <button type="submit" class="btn-publish">ğŸš€ Publier le trajet</button>
          </div>
        </div>

      </form>

    </div>
  </div>
</div>
